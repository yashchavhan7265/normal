<script type="text/javascript">
    require(["jquery", "jquery/validate"], function($) {
        $(document).ready(function() {
            // Initialize validation without automatic triggers
            var validator = $("#user-details-form").validate({
                errorClass: "form-error-message",
                rules: {
                    firstname: {
                        required: true,
                        minlength: 2
                    },
                    lastname: {
                        required: true,
                        minlength: 2
                    },
                    email: {
                        required: true,
                        email: true
                    },
                    location: {
                        required: true,
                        minlength: 10
                    }
                    // Add rules for other fields as needed
                },
                messages: {
                    firstname: {
                        required: "First name is required",
                        minlength: "Your first name must be at least 2 characters long"
                    },
                    lastname: {
                        required: "Last name is required",
                        minlength: "Your last name must be at least 2 characters long"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address"
                    },
                    location: {
                        required: "Location is required",
                        minlength: "Your location must be at least 10 characters long"
                    }
                    // Add messages for other fields as needed
                },
                errorPlacement: function(error, element) {
                    var errorElement = $(element).next('.form-error-message');
                    errorElement.html(error);
                },
                success: function(label) {
                    label.closest('.field-type-text').find('.form-error-message').empty();
                },
                onfocusout: false, // Disable validation on focusout
                onkeyup: false, // Disable validation on keyup
                onclick: false // Disable validation on click
            });

            $("#wb-bundle-submit").on("click", function(e) {
                e.preventDefault(); // Prevent the default action
                if ($("#user-details-form").valid()) {
                    // Submit the form via AJAX
                    $.ajax({
                        url: '<?php echo $this->getUrl("your/controller/action"); ?>',
                        type: 'POST',
                        data: {
                            firstname: $('#firstname').val(),
                            lastname: $('#lastname').val(),
                            email: $('#email').val(),
                            location: $('#location').val()
                            // Add any other data you want to send to the server
                        },
                        success: function(response) {
                            // Handle successful response
                            alert('Success: ' + response.message);
                        },
                        error: function(xhr, status, error) {
                            // Handle error
                            alert('Error: ' + xhr.responseText);
                        }
                    });
                } else {
                    console.log("Form is invalid");
                }
            });
        });
    });
</script>